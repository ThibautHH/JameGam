[gd_scene load_steps=17 format=3 uid="uid://7vbn4es3hxe7"]

[ext_resource type="Script" path="res://scripts/game.gd" id="1_xtrjf"]
[ext_resource type="Texture2D" uid="uid://bt0mykalwcj1r" path="res://assets/tiles/atlas.png" id="2_dc44s"]
[ext_resource type="Texture2D" uid="uid://dai8srkt84aqc" path="res://assets/units/atlas.png" id="3_j7hd8"]
[ext_resource type="Texture2D" uid="uid://bqlsj77rv25ce" path="res://assets/overlay/atlas.png" id="4_eqmcd"]
[ext_resource type="Theme" uid="uid://b6jvf3edqsin" path="res://themes/buttonTheme.tres" id="5_ldy4f"]
[ext_resource type="Texture2D" uid="uid://cvj5mi7i0vnf3" path="res://assets/menu/gold-coins-small.png" id="6_as5f0"]
[ext_resource type="Script" path="res://scripts/inv_bar.gd" id="6_h4uw1"]
[ext_resource type="Texture2D" uid="uid://6ubeg6oyv4vn" path="res://assets/menu/ball-green.png" id="6_trw51"]
[ext_resource type="Texture2D" uid="uid://cjikdxufxneb5" path="res://assets/menu/book5.png" id="7_036mw"]
[ext_resource type="Texture2D" uid="uid://b5mhfuuu3du20" path="res://assets/menu/axe.png" id="8_8ouop"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_Biomes"]
resource_name = "Biomes"
texture = ExtResource("2_dc44s")
texture_region_size = Vector2i(72, 72)
0:0/0 = 0
0:0/0/custom_data_0 = 2
0:0/0/custom_data_2 = "The air is thick with the scent of damp stone, and the echoes of unseen drips vanish into the abyss."
0:0/0/custom_data_3 = [{
"description": "pick up some mushrooms"
}]
1:0/0 = 0
1:0/0/custom_data_0 = 2
1:0/0/custom_data_2 = "Wisps of mist coil around jagged peaks, hiding secrets in their endless embrace."
1:0/0/custom_data_3 = [{
"description": "pray to the wind god"
}]
2:0/0 = 0
2:0/0/custom_data_0 = 1
2:0/0/custom_data_2 = "The sun blazes overhead, turning the endless dunes into a sea of shifting gold."
2:0/0/custom_data_3 = [{
"description": "drink water"
}]
3:0/0 = 0
3:0/0/custom_data_0 = 2
3:0/0/custom_data_2 = "A lone dune rises like a forgotten wave, its crest whispering with the restless wind."
3:0/0/custom_data_3 = [{
"description": "drink water"
}]
4:0/0 = 0
4:0/0/custom_data_0 = 1
4:0/0/custom_data_2 = "A shimmering jewel in the arid expanse, its waters promise life in the heart of desolation."
4:0/0/custom_data_3 = [{
"description": "drink water"
}]
0:1/0 = 0
0:1/0/custom_data_0 = 1
0:1/0/custom_data_2 = "tent"
0:1/0/custom_data_3 = [{
"description": "drink water"
}]
1:1/0 = 0
1:1/0/custom_data_0 = 2
1:1/0/custom_data_2 = "grass"
1:1/0/custom_data_3 = [{
"description": "a cave"
}]
2:1/0 = 0
2:1/0/custom_data_0 = 2
2:1/0/custom_data_2 = "hill"
2:1/0/custom_data_3 = [{
"description": "a cave"
}]
3:1/0 = 0
3:1/0/custom_data_0 = 2
3:1/0/custom_data_2 = "Sunlight filters through an emerald canopy, dappling the mossy ground with shifting patterns."
3:1/0/custom_data_3 = [{
"description": "cut tree"
}]
4:1/0 = 0
4:1/0/custom_data_0 = 1
4:1/0/custom_data_2 = "A vast, rolling expanse where the wind dances freely through an ocean of emerald blades."
4:1/0/custom_data_3 = [{
"description": "pick some herbs"
}]
0:2/0 = 0
0:2/0/custom_data_0 = 2
0:2/0/custom_data_2 = "A gentle rise in the land offers a glimpse of the world beyond, kissed by the wandering sky."
0:2/0/custom_data_3 = [{
"description": "hike"
}]
1:2/0 = 0
1:2/0/custom_data_0 = 1
1:2/0/custom_data_2 = "Nestled among towering peaks, the village clings to the mountainside like a secret whispered to the wind."
1:2/0/custom_data_3 = [{
"description": "oui"
}]
2:2/0 = 0
2:2/0/custom_data_0 = 2
2:2/0/custom_data_2 = "A frozen mirror stretches across the land, its surface trapping the sky in an eternal embrace."
2:2/0/custom_data_3 = [{
"description": "dig a hole"
}]
3:2/0 = 0
3:2/0/custom_data_0 = 2
3:2/0/custom_data_2 = "Molten fire churns hungrily, a searing heart of destruction and creation."
3:2/0/custom_data_3 = [{
"description": "fire"
}]
4:2/0 = 0
4:2/0/custom_data_0 = 2
4:2/0/custom_data_2 = "The jagged peaks pierce the heavens, standing as silent sentinels of time."
4:2/0/custom_data_3 = [{
"description": "pray to the mountain god"
}]
0:3/0 = 0
0:3/0/custom_data_0 = 2
0:3/0/custom_data_2 = "ezar"
0:3/0/custom_data_3 = [{
"description": "a cave"
}]
1:3/0 = 0
1:3/0/custom_data_0 = 1
1:3/0/custom_data_2 = "ezra"
1:3/0/custom_data_3 = [{
"description": "a cave"
}]
2:3/0 = 0
2:3/0/custom_data_0 = 1
2:3/0/custom_data_2 = "Snow field"
2:3/0/custom_data_3 = [{
"description": "white everywhere"
}]
3:3/0 = 0
3:3/0/custom_data_0 = 2
3:3/0/custom_data_2 = "Snowy Hill"
3:3/0/custom_data_3 = [{
"description": "A gentle slope blanketed in white, where every step is muffled by winter’s hush."
}]
4:3/0 = 0
4:3/0/custom_data_0 = 2
4:3/0/custom_data_2 = "Snowy Mountain"
4:3/0/custom_data_3 = [{
"description": "Ice-laden crags stand defiant against the howling wind, their peaks lost in the storm’s embrace."
}]
0:4/0 = 0
0:4/0/custom_data_0 = 1
0:4/0/custom_data_2 = "zera"
0:4/0/custom_data_3 = [{
"description": "a cave"
}]
1:4/0 = 0
1:4/0/custom_data_0 = 2
1:4/0/custom_data_2 = "Thick mists coil over stagnant waters, where twisted roots grasp hungrily at the sodden earth."
1:4/0/custom_data_3 = [{
"description": "take a dip"
}]
2:4/0 = 0
2:4/0/custom_data_0 = 1
2:4/0/custom_data_2 = "Wooden walkways creak underfoot, suspended above murky waters that never truly sleep."
2:4/0/custom_data_3 = [{
"description": "buy a boat for 2 gold",
"effects": [{
"type": "gold",
"value": -2
}],
"items": ["boat"]
}, {
"description": "pillage the village",
"effects": [{
"type": "gold",
"value": 2
}, {
"type": "evil",
"value": 1
}],
"special": "destroy"
}]
3:4/0 = 0
3:4/0/custom_data_0 = 2
3:4/0/custom_data_2 = "Volcano"
3:4/0/custom_data_3 = [{
"description": "Blackened rock trembles with hidden fury, veins of fire glowing beneath the cracks."
}]
4:4/0 = 0
4:4/0/custom_data_0 = 1
4:4/0/custom_data_2 = "Ocean"
4:4/0/custom_data_3 = [{
"description": "The endless blue whispers with the voice of the tides, carrying secrets only the deep can know."
}]
0:5/0 = 0
0:5/0/custom_data_1 = true
1:5/0 = 0
1:5/0/custom_data_1 = true

[sub_resource type="TileSet" id="Ground"]
resource_name = "Ground"
tile_shape = 3
tile_offset_axis = 1
tile_size = Vector2i(72, 72)
custom_data_layer_0/name = "movement_cost"
custom_data_layer_0/type = 2
custom_data_layer_1/name = "impassable"
custom_data_layer_1/type = 1
custom_data_layer_2/name = "flavor_text"
custom_data_layer_2/type = 4
custom_data_layer_3/name = "events"
custom_data_layer_3/type = 28
sources/0 = SubResource("TileSetAtlasSource_Biomes")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_we8m3"]
texture = ExtResource("3_j7hd8")
texture_region_size = Vector2i(72, 72)
0:0/0 = 0
0:0/0/custom_data_0 = "adept"
0:0/0/custom_data_1 = "looks like a beggar"
1:0/0 = 0
1:0/0/custom_data_0 = "berserk"
1:0/0/custom_data_1 = "an angry looking dwarf"
2:0/0 = 0
2:0/0/custom_data_0 = "boat"
2:0/0/custom_data_1 = "a cool looking boat"
0:1/0 = 0
0:1/0/custom_data_0 = "dragon"
0:1/0/custom_data_1 = "does this guy breathe fire ?"
1:1/0 = 0
1:1/0/custom_data_0 = "troll"
1:1/0/custom_data_1 = "uncivilised creature"
2:1/0 = 0
2:1/0/custom_data_0 = "ogre"
2:1/0/custom_data_1 = "ughhh, what an ugly looking creature"
0:2/0 = 0
0:2/0/custom_data_0 = "peasant"
0:2/0/custom_data_1 = "a farmer ..."
1:2/0 = 0
1:2/0/custom_data_0 = "scorpion"
1:2/0/custom_data_1 = "this sneaky bastard looks dangerous"

[sub_resource type="TileSet" id="Entities"]
resource_name = "Entities"
tile_shape = 3
tile_offset_axis = 1
tile_size = Vector2i(72, 72)
custom_data_layer_0/name = "type"
custom_data_layer_0/type = 4
custom_data_layer_1/name = "flavor_text"
custom_data_layer_1/type = 4
sources/0 = SubResource("TileSetAtlasSource_we8m3")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_Overlays"]
texture = ExtResource("4_eqmcd")
texture_region_size = Vector2i(72, 72)
0:0/0 = 0
1:0/0 = 0
0:1/0 = 0
1:1/0 = 0
0:2/0 = 0
1:2/0 = 0
0:3/0 = 0
1:3/0 = 0
0:4/0 = 0
1:4/0 = 0

[sub_resource type="TileSet" id="Overlays"]
resource_name = "Overlays"
tile_shape = 3
tile_offset_axis = 1
tile_size = Vector2i(72, 72)
sources/0 = SubResource("TileSetAtlasSource_Overlays")

[node name="Root" type="Node2D" node_paths=PackedStringArray("ground_layer", "entity_layer", "ui_layer", "events")]
script = ExtResource("1_xtrjf")
ground_layer = NodePath("Ground Layer")
entity_layer = NodePath("Entity Layer")
ui_layer = NodePath("UI Layer")
events = NodePath("GUI/events")

[node name="Ground Layer" type="TileMapLayer" parent="."]
tile_set = SubResource("Ground")

[node name="Entity Layer" type="TileMapLayer" parent="."]
tile_set = SubResource("Entities")

[node name="UI Layer" type="TileMapLayer" parent="."]
tile_set = SubResource("Overlays")

[node name="GUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_left = 1567.0
offset_top = 31.0
offset_right = 1607.0
offset_bottom = 71.0

[node name="events" type="Node" parent="GUI"]

[node name="tile preview" type="Sprite2D" parent="GUI"]
position = Vector2(124, 80)
scale = Vector2(2, 2)

[node name="tile event" type="Label" parent="GUI"]
layout_mode = 0
offset_left = 121.0
offset_top = 280.0
offset_right = 202.0
offset_bottom = 303.0
text = "tile event :"

[node name="tile description" type="Label" parent="GUI"]
layout_mode = 0
offset_left = 132.0
offset_top = 50.0
offset_right = 306.0
offset_bottom = 137.0

[node name="entity description" type="Label" parent="GUI"]
layout_mode = 0
offset_left = 190.0
offset_top = 183.0
offset_right = 230.0
offset_bottom = 206.0

[node name="console" type="RichTextLabel" parent="GUI"]
layout_mode = 0
offset_left = 64.0
offset_top = 490.0
offset_right = 311.0
offset_bottom = 623.0
bbcode_enabled = true

[node name="move to tile" type="Button" parent="GUI"]
layout_mode = 0
offset_left = 135.0
offset_top = 884.0
offset_right = 227.0
offset_bottom = 911.0
theme = ExtResource("5_ldy4f")
text = "move to tile"

[node name="end turn" type="Button" parent="GUI"]
layout_mode = 0
offset_left = 138.0
offset_top = 922.0
offset_right = 206.0
offset_bottom = 949.0
theme = ExtResource("5_ldy4f")
text = "end turn"

[node name="invBar" type="Node" parent="GUI"]
script = ExtResource("6_h4uw1")

[node name="evil" type="Label" parent="GUI/invBar"]
offset_left = 136.0
offset_top = 12.0
offset_right = 194.0
offset_bottom = 35.0
text = "0"
uppercase = true

[node name="Sprite2D" type="Sprite2D" parent="GUI/invBar/evil"]
position = Vector2(-24, 9)
texture = ExtResource("7_036mw")

[node name="strenght" type="Label" parent="GUI/invBar"]
offset_left = 204.0
offset_top = 12.0
offset_right = 262.0
offset_bottom = 35.0
text = "0"
uppercase = true

[node name="Sprite2D" type="Sprite2D" parent="GUI/invBar/strenght"]
position = Vector2(-23, 7)
texture = ExtResource("8_8ouop")

[node name="gold" type="Label" parent="GUI/invBar"]
offset_left = 56.0
offset_top = 11.0
offset_right = 114.0
offset_bottom = 34.0
text = "0"
uppercase = true

[node name="Sprite2D" type="Sprite2D" parent="GUI/invBar/gold"]
position = Vector2(-21, 10)
texture = ExtResource("6_as5f0")

[node name="energy" type="Label" parent="GUI/invBar"]
offset_left = 268.0
offset_top = 13.0
offset_right = 326.0
offset_bottom = 36.0
text = "0"
uppercase = true

[node name="Sprite2D" type="Sprite2D" parent="GUI/invBar/energy"]
position = Vector2(-21, 10)
texture = ExtResource("6_trw51")

[node name="updateDisplay" type="Timer" parent="GUI/invBar"]
autostart = true

[connection signal="button_up" from="GUI/move to tile" to="." method="_on_move_to_tile_button_up"]
[connection signal="button_up" from="GUI/end turn" to="." method="_on_end_turn_button_up"]
[connection signal="timeout" from="GUI/invBar/updateDisplay" to="GUI/invBar" method="_on_update_display_timeout"]
